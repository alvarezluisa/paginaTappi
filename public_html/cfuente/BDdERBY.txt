DROP TABLE SINTOMASXHISTORIA  ;

DROP TABLE USUARIOXANTECEDENTE  ;

DROP TABLE HISTORIACLINICA  ;

DROP TABLE USUARIO  ;

DROP TABLE ANTECEDENTE ;

DROP TABLE LINEASEMERGENCIA ;

DROP TABLE NIVELURGENCIA ;

DROP TABLE SINTOMA  ;

DROP TABLE TRIAGE  ;


CREATE TABLE ANTECEDENTE
  (
    IDANTECEDENTE INTEGER NOT NULL ,
    DESCRIPCION   VARCHAR (100) ,
    TIPO          VARCHAR (50),
    CONSTRAINT ANTECEDENTE_PK PRIMARY KEY ( IDANTECEDENTE ) 
  );


CREATE TABLE HISTORIACLINICA
  (
    IDHISTORIACLINICA         INTEGER NOT NULL ,
    DESCRIPCIONMOTIVOURGENCIA VARCHAR (500) ,
    INICIOMOTIVOURGENCIA      DATE ,
    USUARIO_IDUSUARIO         INTEGER NOT NULL ,
    FECHA                     DATE ,
    NIVELTRIAGE              INTEGER,
    CONSTRAINT HISTORIACLINICA_PK PRIMARY KEY ( IDHISTORIACLINICA ) 
  ) ;



CREATE TABLE LINEASEMERGENCIA
  (
    IDLINEASEMERGENCIA INTEGER NOT NULL ,
    NUMERO             INTEGER ,
    DESCRIPCION        VARCHAR (50) ,
    CONSTRAINT LINEASEMERGENCIA_PK PRIMARY KEY ( IDLINEASEMERGENCIA ) 
  ) ;



CREATE TABLE NIVELURGENCIA
  (
    SINTOMA_IDSINTOMA INTEGER NOT NULL ,
    TRIAGE_IDTRIAGE   INTEGER NOT NULL ,
    PRESENCIA         CHAR (2),
    CONSTRAINT NIVELURGENCIA_PK PRIMARY KEY ( SINTOMA_IDSINTOMA, TRIAGE_IDTRIAGE ) 
  ) ;



CREATE TABLE SINTOMA
  (
    IDSINTOMA    INTEGER NOT NULL ,
    DESCRIPCIONM VARCHAR (100) ,
    DESCRIPCIONP VARCHAR (100) ,
    COORDENADAX  INTEGER ,
    COORDENADAY  INTEGER,
    CONSTRAINT SINTOMA_PK PRIMARY KEY ( IDSINTOMA ) 
  ) ;



CREATE TABLE SINTOMASXHISTORIA
  (
    FECHA                DATE ,
    HISTORIACLINICA_IDHC INTEGER NOT NULL ,
    SINTOMA_IDSINTOMA    INTEGER NOT NULL ,
    PRESENCIA            CHAR (2),
    CONSTRAINT SINTOMASXHISTORIA_PK PRIMARY KEY ( HISTORIACLINICA_IDHC, SINTOMA_IDSINTOMA ) 
  ) ;



CREATE TABLE TRIAGE
  (
    IDTRIAGE    INTEGER NOT NULL ,
    NIVELTRIAGE INTEGER ,
    DX          VARCHAR (50),
    CONSTRAINT TRIAGE_PK PRIMARY KEY ( IDTRIAGE ) 
  ) ;



CREATE TABLE USUARIO
  (
    IDUSUARIO       INTEGER NOT NULL ,
    IDFACEGOO       VARCHAR (50) ,
    APELLIDO        VARCHAR (45) ,
    CEDULA          INTEGER NOT NULL ,
    CORREO          VARCHAR (45) ,
    DIRECCION       VARCHAR (45) ,
    FECHANACIMIENTO DATE ,
    GENERO          CHAR (1) ,
    NOMBRE          VARCHAR (45) ,
    ROL             VARCHAR (50) ,
    TIPOSANGRE      VARCHAR (3) ,
    EPS             VARCHAR (45),
    ABORTOS              INTEGER NOT NULL ,
    CESAREAS             INTEGER NOT NULL ,
    FECHAPRIMERPERIODO   DATE ,
    FECHAULTIMOPERIODO   DATE ,
    GESTAS               INTEGER NOT NULL ,
    METODOANTICONCEPTIVO VARCHAR (45) ,
    PARTOS               INTEGER NOT NULL 
  ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_PK PRIMARY KEY ( IDUSUARIO ) ;


CREATE TABLE USUARIOXANTECEDENTE
  (
    USUARIO_IDUSUARIO         INTEGER NOT NULL ,
    ANTECEDENTE_IDANTECEDENTE INTEGER NOT NULL
  ) ;
ALTER TABLE USUARIOXANTECEDENTE ADD CONSTRAINT USUARIOXANTECEDENTE_PK PRIMARY KEY ( USUARIO_IDUSUARIO, ANTECEDENTE_IDANTECEDENTE ) ;


ALTER TABLE HISTORIACLINICA ADD CONSTRAINT HISTORIACLINICA_U_FK FOREIGN KEY ( USUARIO_IDUSUARIO ) REFERENCES USUARIO ( IDUSUARIO ) ;

ALTER TABLE NIVELURGENCIA ADD CONSTRAINT NIVELURGENCIA_SINTOMA_FK FOREIGN KEY ( SINTOMA_IDSINTOMA ) REFERENCES SINTOMA ( IDSINTOMA ) ;

ALTER TABLE NIVELURGENCIA ADD CONSTRAINT NIVELURGENCIA_TRIAGE_FK FOREIGN KEY ( TRIAGE_IDTRIAGE ) REFERENCES TRIAGE ( IDTRIAGE ) ;

ALTER TABLE SINTOMASXHISTORIA ADD CONSTRAINT SINTOMASXHISTORIA_HC_FK FOREIGN KEY ( HISTORIACLINICA_IDHC ) REFERENCES HISTORIACLINICA ( IDHISTORIACLINICA ) ;

ALTER TABLE SINTOMASXHISTORIA ADD CONSTRAINT SINTOMASXHISTORIA_S_FK FOREIGN KEY ( SINTOMA_IDSINTOMA ) REFERENCES SINTOMA ( IDSINTOMA ) ;

ALTER TABLE USUARIOXANTECEDENTE ADD CONSTRAINT USUARIOXANTECEDENTE_A_FK FOREIGN KEY ( ANTECEDENTE_IDANTECEDENTE ) REFERENCES ANTECEDENTE ( IDANTECEDENTE ) ;

ALTER TABLE USUARIOXANTECEDENTE ADD CONSTRAINT USUARIOXANTECEDENTE_U_FK FOREIGN KEY ( USUARIO_IDUSUARIO ) REFERENCES USUARIO ( IDUSUARIO ) ;


ALTER TABLE USUARIOXANTECEDENTE ALTER COLUMN AUX DEFAULT FALSE;
